is_safe_int : (x:Integer) -> Boolean = uninterpreted;

produce : (x:Integer) -> {x:Integer | is_safe_int(x)} {
    1;
}

consume : (x:{x:Integer | is_safe_int(x)}) -> Integer {
    1;
}

main : () -> Top {

    a : {a:Integer | is_safe_int(a)} = produce(1);
    b : Integer = consume(a);
    // b : Integer = consume(2); # would fail
    print<Integer>(b);
}
